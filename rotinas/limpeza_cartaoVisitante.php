<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../css/bootstrap.min.css">
</head>
<html>
<body>
<?php
// print Errors
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL);

include '../include/function.php';
include '../include/connect.php';
sessao();

// Declaração de variaveis




/* Não funcional 




$arrayMatriculas = array(9272,
9303,
9422,
9426,
9452,
9469,
9617,
9669,
9682,
10545,
10552,
10557,
10567,
10592,
10606,
10610,
10611,
10637,
10654,
10658,
10665,
10666,
10670,
10712,
10730,
11591,
11923,
11983,
12047,
12694,
12884,
12904,
12911,
12916,
12921,
12926,
12930,
12938,
12944,
12946,
12948,
12950,
12955,
12956,
12964,
12967,
12968,
12971,
12990,
12999,
13000,
13002,
13004,
13006,
13010,
13018,
13020,
13032,
13061,
13074,
13082,
13088,
13090,
13091,
13092,
13093,
13094,
13095,
13096,
13097,
13098,
13100,
13101,
13103,
13104,
13106,
13108,
13109,
13110,
13111,
13112,
13113,
13114,
13115,
13116,
13117,
13118,
13120,
13122,
13126,
13127,
13128,
13130,
13132,
13133,
13134,
13137,
13138,
13139,
13140,
13141,
13142,
13143,
13150,
13178,
13182,
13192,
13195,
13234,
13236,
13241,
13242,
13256,
13259,
13269,
13274,
13293,
13312,
13317,
13342,
13343,
13344,
13345,
13347,
13349,
13350,
13353,
13354,
13355,
13356,
13357,
13358,
13359,
13360,
13361,
13363,
13364,
13365,
13366,
13367,
13368,
13370,
13371,
13372,
13373,
13374,
13376,
13377,
13378,
13380,
13381,
13382,
13383,
13385,
13386,
13387,
13388,
13389,
13390,
13391,
13392,
13393,
13394,
13395,
13396,
13398,
13399,
13400,
13401,
13403,
13404,
13405,
13406,
13407,
13408,
13409,
13411,
13412,
13413,
13414,
13415,
13416,
13417,
13418,
13419,
13420,
13421,
13422,
13423,
13424,
13425,
13426,
13427,
13428,
13429,
13430,
13431,
13432,
13433,
13434,
13435,
13436,
13438,
13439,
13440,
13441,
13443,
13444,
13445,
13446,
13448,
13449,
13450,
13451,
13452,
13453,
13454,
13455,
13456,
13458,
13459,
13460,
13461,
13462,
13463,
13465,
13466,
13467,
13468,
13469,
13470,
13471,
13472,
13473,
13474,
13475,
13476,
13477,
13478,
13479,
13480,
13481,
13482,
13483,
13484,
13487,
13488,
13489,
13490,
13491,
13492,
13493,
13494,
13495,
13496,
13497,
13500,
13501,
13502,
13503,
13504,
13506,
13507,
13508,
13509,
13510,
13511,
13513,
13514,
13515,
13516,
13517,
13518,
13519,
13520,
13521,
13522,
13524,
13525,
13526,
13527,
13528,
13529,
13530,
13531,
13532,
13534,
13535,
13536,
13537,
13538,
13539,
13541,
13543,
13544,
13545,
13547,
13548,
13549,
13550,
13552,
13553,
13554,
13555,
13556,
13557,
13558,
13559,
13560,
13561,
13562,
13563,
13565,
13566,
13567,
13568,
13569,
13570,
13571,
13572,
13574,
13575,
13576,
13577,
13578,
13579,
13580,
13582,
13585,
13586,
13588,
13590,
13591,
13592,
13593,
13594,
13595,
13596,
13597,
13598,
13599,
13601,
13602,
13603,
13604,
13605,
13606,
13607,
13608,
13609,
13610,
13611,
13612,
13613,
13614,
13615,
13616,
13617,
13618,
13619,
13620,
13621,
13622,
13625,
13626,
13627,
13628,
13629,
13630,
13631,
13632,
13633,
13635,
13636,
13637,
13638,
13639,
13640,
13641,
13642,
13644,
13645,
13646,
13647,
13648,
13649,
13650,
13652,
13661,
13666,
13667,
13668,
13672,
13677,
13679,
13688,
13689,
13698,
13700,
13708,
13711,
13712,
13713,
13714,
13715,
13716,
13717,
13718,
13719,
13720,
13722,
13723,
13724,
13725,
13726,
13728,
13729,
13730,
13731,
13733,
13734,
13735,
13736,
13737,
13738,
13739,
13740,
13741,
13742,
13743,
13745,
13746,
13747,
13748,
13749,
13750,
13751,
13752,
13753,
13754,
13755,
13756,
13757,
13758,
13759,
13760,
13761,
13762,
13763,
13765,
13766,
13767,
13769,
13771,
13772,
13774,
13775,
13776,
13777,
13778,
13779,
13780,
13781,
13782,
13783,
13784,
13785,
13786,
13789,
13790,
13791,
13792,
13793,
13794,
13795,
13796,
13797,
13798,
13799,
13800,
13801,
13802,
13803,
13804,
13805,
13806,
13807,
13808,
13809,
13810,
13811,
13812,
13813,
13814,
13815,
13816,
13817,
13818,
13820,
13821,
13822,
13823,
13824,
13825,
13826,
13827,
13828,
13829,
13830,
13831,
13832,
13833,
13834,
13836,
13837,
13838,
13839,
13840,
13841,
13842,
13843,
13844,
13845,
13846,
13847,
13848,
13849,
13850,
13851,
13852,
13853,
13854,
13855,
13856,
13857,
13858,
13859,
13860,
13862,
13863,
13864,
13865,
13866,
13869,
13870,
13871,
13872,
13873,
13874,
13875,
13876,
13877,
13879,
13880,
13881,
13883,
13884,
13885,
13888,
13892,
13893,
13895,
13896,
13899,
13901,
13902,
13904,
13907,
13908,
13909,
13910,
13911,
13913,
13914,
13915,
13916,
13917,
13922,
13923,
13926,
13927,
13928,
13929,
13930,
13931,
13932,
13935,
13937,
13938,
13939,
13940,
13941,
13943,
13945,
13946,
13950,
13952,
13953,
13954,
13955,
13956,
13957,
13958,
13959,
13960,
13961,
13962,
13963,
13964,
13965,
13966,
13967,
13968,
13969,
13970,
13971,
13972,
13974,
13975,
13976,
13977,
13980,
13981,
13982,
13983,
13984,
13985,
13986,
13988,
13989,
13991,
13992,
13993,
13994,
13996,
13997,
14000,
14001,
14002,
14003,
14004,
14005,
14006,
14007,
14008,
14009,
14012,
14013,
14016,
14017,
14018,
14019,
14020,
14021,
14023,
14025,
14026,
14027,
14029,
14030,
14031,
14033,
14034,
14037,
14038,
14039,
14040,
14041,
14042,
14043,
14044,
14045,
14046,
14048,
14049,
14050,
14051,
14052,
14053,
14055,
14056,
14057,
14058,
14059,
14063,
14065,
14067,
14069,
14070,
14071,
14073,
14075,
14077,
14078,
14079,
14080,
14081,
14082,
14083,
14084,
14085,
14087,
14088,
14089,
14090,
14092,
14094,
14095,
14096,
14097,
14098,
14099,
14100,
14102,
14110,
14113,
14114,
14117,
14118,
14120,
14121,
14122,
14123,
14124,
14125,
14126,
14128,
14132,
14133,
14134,
14136,
14140,
14141,
14143,
14144,
14146,
14147,
14150,
14152,
14154,
14155,
14158,
14160,
14163,
14164,
14166,
14168,
14172,
14178,
14186,
14187,
14190,
14191,
14193,
14194,
14198,
14199,
14200,
14204,
14205,
14211,
14213,
14214,
14217,
14218,
14220,
14221,
14229,
14235,
14236,
14237,
14238,
14239,
14240,
14241,
14242,
14246,
14248,
14249,
14250,
14253,
14257,
14258,
14267,
14271,
14272,
14274,
14276,
14277,
14279,
14281,
14284,
14285,
14286,
14287,
14291,
14293,
14294,
14295,
14296,
14297,
14298,
14299,
14300,
14301,
14302,
14303,
14304,
14305,
14306,
14307,
14308,
14310,
14311,
14312,
14313,
14314,
14316,
14317,
14318,
14319,
14320,
14321,
14323,
14324,
14325,
14326,
14327,
14329,
14330,
14331,
14332,
14333,
14334,
14338,
14340,
14341,
14342,
14343,
14344,
14345,
14348,
14349,
14351,
14352,
14353,
14356,
14357,
14359,
14362,
14364,
14365,
14368,
14369,
14370,
14372,
14373,
14374,
14375,
14376,
14377,
14378,
14380,
14382,
14383,
14384,
14386,
14387,
14388,
14389,
14390,
14391,
14392,
14393,
14394,
14396,
14397,
14398,
14399,
14400,
14401,
14403,
14404,
14405,
14407,
14408,
14409,
14410,
14411,
14412,
14413,
14414,
14415,
14416,
14417,
14418,
14419,
14420,
14421,
14423,
14424,
14425,
14426,
14427,
14428,
14429,
14430,
14431,
14433,
14434,
14435,
14436,
14437,
14438,
14439,
14440,
14441,
14442,
14443,
14444,
14445,
14446,
14447,
14448,
14449,
14450,
14451,
14452,
14453,
14455,
14456,
14457,
14458,
14459,
14460,
14461,
14462,
14464,
14465,
14466,
14467,
14468,
14469,
14470,
14471,
14472,
14473,
14474,
14476,
14477,
14478,
14479,
14481,
14482,
14484,
14486,
14488,
14489,
14492,
14497,
14502,
14504,
14508,
14509,
14511,
14515,
14519,
14520,
14522,
14524,
14526,
14527,
14528,
14530,
14531,
14532,
14534,
14535,
14536,
14538,
14539,
14541,
14542,
14544,
14545,
14546,
14547,
14548,
14549,
14550,
14551,
14552,
14554,
14555,
14556,
14558,
14559,
14560,
14561,
14562,
14564,
14565,
14569,
14570,
14571,
14572,
14574,
14575,
14576,
14577,
14578,
14579,
14580,
14581,
14584,
14585,
14586,
14587,
14588,
14589,
14590,
14591,
14597,
14598,
14599,
14600,
14601,
14602,
14603,
14604,
14605,
14606,
14607,
14608,
14609,
14610,
14611,
14612,
14613,
14614,
14615,
14616,
14617,
14618,
14619,
14620,
14621,
14622,
14624,
14625,
14628,
14630,
14631,
14632,
14633,
14634,
14635,
14636,
14637,
14640,
14643,
14644,
14645,
14646,
14647,
14648,
14649,
14650,
14651,
14652,
14653,
14655,
14656,
14657,
14658,
14659,
14660,
14661,
14662,
14664,
14665,
14666,
14667,
14669,
14670,
14671,
14673,
14674,
14675,
14676,
14677,
14678,
14679,
14681,
14682,
14683,
14684,
14685,
14686,
14688,
14689,
14690,
14691,
14692,
14694,
14696,
14697,
14698,
14699,
14701,
14702,
14703,
14704,
14705,
14707,
14708,
14709,
14710,
14711,
14712,
14715,
14716,
14717,
14720,
14721,
14722,
14723,
14724,
14727,
14728,
14729,
14730,
14731,
14733,
14734,
14735,
14736,
14737,
14738,
14739,
14740,
14741,
14743,
14745,
14747,
14748,
14749,
14750,
14752,
14753,
14754,
14755,
14756,
14757,
14758,
14759,
14760,
14761,
14762,
14764,
14765,
14766,
14767,
14768,
14769,
14770,
14772,
14773,
14774,
14775,
14776,
14780,
14781,
14782,
14783,
14784,
14786,
14787,
14788,
14789,
14790,
14791,
14792,
14793,
14794,
14795,
14796,
14797,
14798,
14799,
14800,
14801,
14802,
14803,
14804,
14805,
14807,
14808,
14809,
14810,
14813,
14814,
14815,
14816,
14818,
14819,
14823,
14825,
14826,
14827,
14828,
14829,
14830,
14831,
14832,
14833,
14835,
14836,
14837,
14838,
14839,
14840,
14841,
14843,
14844,
14845,
14846,
14847,
14849,
14851,
14852,
14855,
14856,
14857,
14858,
14859,
14860,
14863,
14865,
14866,
14867,
14868,
14871,
14872,
14873,
14875,
14876,
14877,
14878,
14879,
14880,
14881,
14882,
14883,
14885,
14887,
14889,
14891,
14893,
14895,
14896,
14897,
14900,
14901,
14902,
14903,
14904,
14905,
14907,
14908,
14909,
14910,
14911,
14912,
14913,
14914,
14915,
14916,
14918,
14920,
14921,
14922,
14923,
14924,
14925,
14926,
14927,
14928,
14930,
14931,
14934,
14936,
14937,
14938,
14939,
14940,
14941,
14942,
14943,
14944,
14945,
14947,
14949,
14951,
14954,
14955,
14956,
14957,
14958,
14959,
14961,
14962,
14963,
14964,
14966,
14968,
14969,
14970,
14972,
14973,
14975,
14976,
14977,
14978,
14979,
14980,
14981,
14982,
14983,
14984,
14986,
14987,
14988,
14989,
14993,
14994,
14995,
14996,
14997,
14999,
15000,
15002,
15003,
15004,
15005,
15006,
15008,
15011,
15012,
15013,
15014,
15015,
15016,
15018,
15019,
15020,
15021,
15022,
15023,
15024,
15026,
15028,
15029,
15030,
15031,
15032,
15033,
15034,
15035,
15036,
15037,
15039,
15041,
15042,
15043,
15046,
15047,
15048,
15049,
15050,
15051,
15052,
15053,
15054,
15055,
15056,
15058,
15060,
15061,
15062,
15063,
15064,
15065,
15066,
15067,
15068,
15069,
15070,
15071,
15072,
15073,
15074,
15075,
15076,
15077,
15078,
15079,
15080,
15081,
15082,
15083,
15084,
15085,
15086,
15087,
15088,
15089,
15090,
15091,
15092,
15093,
15094,
15095,
15096,
15097,
15098,
15099,
15100,
15101,
15102,
15103,
15104,
15105,
15106,
15107,
15108,
15109,
15110,
15111,
15112,
15113,
15114,
15115,
15116,
15117,
15118,
15119,
15120,
15121,
15122,
15123,
15124,
15125,
15126,
15127,
15128,
15129,
15130,
15131,
15132,
15133,
15134,
15135,
15136,
15137,
15138,
15139,
15140,
15142,
15143,
15144,
15145,
15147,
15148,
15149,
15150,
15151,
15152,
15153,
15154,
15156,
15157,
15158,
15161,
15163,
15165,
15166,
15167,
15168,
15169,
15172,
15173,
15174,
15176,
15177,
15179,
15180,
15181,
15183,
15184,
15189,
15190,
15192,
15194,
15195,
15196,
15197,
15198,
15202,
15203,
15205,
15345,
15346,
15347,
15348,
15350,
15351,
15352,
15353,
15354,
15355,
15356,
15357,
15358,
15359,
15360,
15361,
15362,
15363,
15364,
15365,
15367,
15368,
15369,
15370,
15372,
15373,
15374,
15375,
15377,
15378,
15379,
15382,
15383,
15384,
15386,
15389,
15390,
15391,
15392,
15393,
15394,
15395,
15397,
15398,
15399,
15400,
15401,
15402,
15403,
15404,
15405,
15406,
15407,
15409,
15412,
15413,
15415,
15416,
15418,
15419,
15420,
15422,
15423,
15424,
15425,
15426,
15427,
15428,
15429,
15430,
15432,
15433,
15434,
15435,
15436,
15437,
15438,
15440,
15441,
15443,
15445,
15446,
15447,
15448,
15449,
15450,
15451,
15452,
15453,
15454,
15457,
15458,
15459,
15460,
15462,
15463,
15464,
15465,
15467,
15468,
15469,
15470,
15471,
15472,
15473,
15474,
15475,
15476,
15477,
15478,
15479,
15480,
15481,
15482,
15483,
15484,
15486,
15487,
15488,
15489,
15490,
15491,
15492,
15493,
15494,
15495,
15496,
15497,
15499,
15500,
15501,
15502,
15503,
15504,
15505,
15506,
15507,
15509,
15510,
15511,
15512,
15514,
15516,
15517,
15519,
15520,
15521,
15522,
15523,
15525,
15526,
15527,
15528,
15529,
15530,
15531,
15532,
15533,
15534,
15535,
15536,
15537,
15538,
15539,
15540,
15541,
15542,
15543,
15544,
15545,
15546,
15549,
15555,
15556,
15558,
15559,
15562,
15563,
15564,
15574,
15575,
15579,
15580,
15581,
15582,
15584,
15585,
15587,
15590,
15591,
15594,
15596,
15599,
15600,
15603,
15604,
15605,
15610,
15614,
15615,
15617,
15618,
15621,
15622,
15624,
15626,
15629,
15630,
15632,
15634,
15635,
15636,
15637,
15638,
15639,
15640,
15642,
15645,
15646,
15651,
15652,
15653,
15654,
15657,
15658,
15661,
15662,
15663,
15665,
15666,
15668,
15669,
15670,
15672,
15674,
15675,
15676,
15677,
15678,
15679,
15680,
15681,
15682,
15683,
15684,
15685,
15687,
15688,
15690,
15691,
15692,
15693,
15694,
15695,
15696,
15697,
15698,
15699,
15701,
15702,
15703,
15704,
15705,
15706,
15707,
15708,
15709,
15710,
15713,
15715,
15716,
15717,
15718,
15719,
15720,
15721,
15722,
15724,
15725,
15726,
15727,
15728,
15729,
15730,
15732,
15733,
15734,
15735,
15736,
15737,
15738,
15739,
15740,
15741,
15742,
15743,
15744,
15745,
15746,
15747,
15748,
15749,
15750,
15751,
15752,
15753,
15754,
15755,
15756,
15757,
15758,
15759,
15760,
15761,
15762,
15763,
15764,
15765,
15766,
15767,
15768,
15769,
15770,
15771,
15772,
15773,
15774,
15775,
15776,
15777,
15778,
15779,
15780,
15782,
15783,
15784,
15785,
15786,
15787,
15788,
15789,
15792,
15793,
15794,
15796,
15797,
15798,
15800,
15801,
15802,
15805,
15806,
15807,
15808,
15809,
15810,
15811,
15813,
15815,
15816,
15817,
15818,
15820,
15821,
15822,
15824,
15825,
15826,
15827,
15828,
15829,
15830,
15831,
15832,
15833,
15834,
15835,
15836,
15837,
15838,
15839,
15840,
15841,
15842,
15843,
15844,
15845,
15846,
15847,
15848,
15849,
15850,
15851,
15852,
15854,
15855,
15856,
15857,
15858,
15859,
15861,
15862,
15863,
15864,
15866,
15868,
15870,
15871,
15872,
15873,
15874,
15875,
15876,
15877,
15878,
15879,
15880,
15882,
15883,
15885,
15888,
15889,
15890,
15892,
15894,
15896,
15898,
15899,
15900,
15902,
15903,
15904,
15907,
15909,
15910,
15912,
15915,
15916,
15917,
15918,
15920,
15921,
15922,
15924,
15925,
15926,
15927,
15928,
15929,
15930,
15931,
15932,
15933,
15934,
15936,
15937,
15938,
15940,
15941,
15942,
15943,
15944,
15945,
15946,
15947,
15949,
15950,
15951,
15952,
15954,
15955,
15958,
15960,
15961,
15962,
15963,
15964,
15965,
15966,
15967,
15968,
15969,
15970,
15971,
15972,
15973,
15975,
15976,
15977,
15978,
15979,
15980,
15981,
15982,
15983,
15984,
15986,
15987,
15988,
15989,
15990,
15991,
15992,
15993,
15995,
15996,
15997,
15998,
15999);

//botao voltar
$voltar = "<form action=\"index.php\" method=\"post\">
<button class=\"btn btn-sm btn-warning btn-block\" type=\"submit\" name=\"reload\" role=\"button\"> Voltar ao início </button>
</form>";
//botao tentar novamente
$tentarnovamente = "<form action=\"select_user.php\" method=\"get\">
<input type=\"hidden\" value=\"$matricula\" name=\"matricula\" id=\"matricula\">
<button class=\"btn btn-sm btn-success btn-block\" type=\"submit\" name=\"reload\" role=\"button\"> Tentar novamente? </button>
</form>";

   
    date_default_timezone_set('UTC');
	$sessao = date("His");
    $tabelatemp = "cartaoVisValida";
	/*$tabelatemp = "relvisitantes".$sessao;
	$sqlcreatetemp = "CREATE TEMPORARY TABLE $tabelatemp SELECT * FROM relvisitantes LIMIT 0;";
	$sqlcreatetempexe = $conn->query($sqlcreatetemp);
	if($sqlcreatetempexe){
    echo "<div class=\"table-responsive\">
        <table class=\"table w-auto\">
        <div class=\"row\"><div class=\"col-sm-4\"><form action=\"../relatorios/exportarpdf_ue.php\" method=\"post\" target=\"_blank\">

        <button type=\"submit\" name=\"btnexportpdf\" id=\"btnexportpdf\">Exportar PDF</button>
        </form></div>
        <div class=\"col-sm-4\"></div>
        <div class=\"col-sm-4\">$voltar</div>
			</div>
			<div class=\"table-responsive-sm folha a4_vertical\" id=\"relatorio\">
			<table class=\"table w-auto\">
			<tr><td><img src=\"../img/churchill.jpg\" class=\"img-thumbnail\" height=\"84\" width=\"84\"></td>
				<td><p>Condomínio Edifício Sir Winston Churchill<br>
				Avenida Paulista, 807 - Cerqueira Cesar, São Paulo - SP<br>
				<b>Relatório de usuários</b></p>
			</td><tr>
			</table>";*/


				$number = 50;
				// echo $number."<br>";
				$cc = 0;
				while ($cc < $number){
					$datatrini = "2023-04-01";
					
						$sql  = "insert into $tabelatemp(Visitante,Matricula,RG,DataAcesso) SELECT Visitante,Matricula,RG,DataAcesso FROM movvis WHERE Matricula='$arrayMatriculas[$cc]'";
						// echo $sql."<br>";
						$sqlexe = $conn->query($sql);
                        unset($arrayMatriculas[$cc]); // remove item do array
					$cc++;
				}
            /*$sqltempfinal = "select Visitante,Matricula,RG,DataAcesso from $tabelatemp order by Matricula ASC";
            // echo $tabelatemp."<br>";
            $sqltempfinalexe = $conn->query($sqltempfinal);
            if($sqltempfinalexe->num_rows > 0){
                echo "<table class=\"table table-sm table-striped table-bordered table-hover\">
                    <thead class=\"thead-light\">
                        <th>Nome</th><th>Matricula</th><th>RG</th><th>DataAcesso</th>
                    </thead>
                    <tbody>";
                while($linhatemp = $sqltempfinalexe->fetch_array(MYSQLI_ASSOC)){
                    $visitante = $linhatemp["visitante"];
                    $matricula = $linhatemp["Matricula"];
                    $rg = $linhatemp["rg"];
                    $dataacesso = $linhatemp["DataAcesso"];  
                echo "<tr><td>$visitante</td><td>$matricula</td><td>$rg</td><td>$dataacesso</td></tr>";
                } // end while temp
                // $sqltempfinal->close; //free result set
            } else {// end if temp
                echo "Não foi encontrado nenhum dado no período informado.<br />";
                echo $tentarnovamente."<br />";
            }
			echo "</tbody>";
		echo "</table>";
	/*} else { // end if Create temp table
		echo "<div class=\"alert alert-danger\" role=\"alert\">Falha na criação da tabela temporária para o relatório.</div><br>$voltar";
	}*/
$conn->close(); // close connection bd

/*} // end if POST
*/?>
</body>
</html>
<?php
//end file
?>